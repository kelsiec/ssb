{% load staticfiles %}

{% load render_bundle from webpack_loader %}

<title>Safe Sequence Builder</title>

{% block topbar_base %}
  <div class="container">
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Safe Sequence Builder</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id='home-nav' class="active"><a href="{% url 'home' %}">Home</a></li>
            <li id='pose-nav' class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Poses<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="{% url 'view_poses' %}">View Pose Library</a></li>
                <li><a href="{% url 'create_pose' %}">Submit a Pose</a></li>
                <li><a href="{% url 'create_flow' %}">Submit a Pose Flow</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
{% endblock %}

{% block body_base %}
  {% if messages %}
    <div class="container-fluid">
      <div id="messages-div" class="col-md-12">
        <ul id="messages">
          {% for message in messages %}
            <div id="message_{{ forloop.counter }}" class="alert alert-{{ message.tags }}">
              <a href="#" class="msg_clear" onclick="$('#message_{{ forloop.counter }}').fadeOut(); return false;">
                <small>clear</small></a> {{ message|safe }}
            </div>
          {% endfor %}
        </ul>
      </div>
    </div>
  {% endif %}
{% endblock %}

{% block content %}{% endblock %}

{% block styles %}
  {% block extra_style %}
    <link href="/static/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/datatables.net-bs/css/dataTables.bootstrap.css" rel="stylesheet">
    <link href="/static/select2/dist/css/select2.min.css" rel="stylesheet" />
  {% endblock %}
{% endblock %}

{% block extra_body_base %}
  {% render_bundle 'main' %}
  {% csrf_token %}
  <script>
    var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

    function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });
  </script>
{% endblock %}

{% block extra_js %}{% endblock %}